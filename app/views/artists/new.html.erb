<div class="container mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-6">アーティストを追加</h1>

    <%= form_with model: [@timetable, @artist], url: timetable_artists_path(@timetable), local: true, class: "space-y-6 bg-white p-6 rounded-lg shadow-md" do |form| %>
    <% if @artist.errors.any? %>
    <div class="bg-red-50 p-4 rounded-md">
        <h2 class="text-red-800 font-medium"><%= @artist.errors.count %>件のエラーがあります。</h2>
        <ul class="mt-2 text-red-700 list-disc list-inside">
            <% @artist.errors.full_messages.each do |message| %>
            <li><%= message %></li>
            <% end %>
        </ul>
    </div>
    <% end %>

    <div class="space-y-2">
        <%= form.label :stage_id, "ステージを選択", class: "block text-sm font-medium text-gray-700" %>
        <%= form.collection_select :stage_id, @stages, :id, :name,
          { prompt: "ステージを選択してください" },
          { class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" }
      %>
    </div>

    <div class="space-y-2">
        <%= form.label :name, "アーティスト名", class: "block text-sm font-medium text-gray-700" %>
        <%= form.text_field :name, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" %>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="space-y-2">
            <%= form.label :start_time, "開始時間", class: "block text-sm font-medium text-gray-700" %>
            <%= form.time_select :start_time,
            { minute_step: 5 },
            { class: "mt-1 block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" }
        %>
        </div>

        <div class="space-y-2">
            <%= form.label :end_time, "終了時間", class: "block text-sm font-medium text-gray-700" %>
            <%= form.time_select :end_time,
            { minute_step: 5 },
            { class: "mt-1 block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" }
        %>
        </div>
    </div>

    <div class="space-y-2">
        <%= form.label :notes, "備考", class: "block text-sm font-medium text-gray-700" %>
        <%= form.text_area :notes, rows: 3, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" %>
    </div>

    <div class="flex justify-end space-x-4 pt-4">
        <%= link_to "キャンセル", timetable_path(@timetable), class: "inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
        <%= form.submit "保存", class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
    </div>
    <% end %>
</div>